!function(t){var a,e,r;e="undefined"!=typeof window&&null!==window?window:global,r="ontouchstart"in e,e.BarRating=a=function(){function a(){this.show=function(){var a,e,n,i,s=t(this.elem),l=this.options,o=r?"touchstart":"click";s.data("barrating")||(i=l.initialRating?t('option[value="'+l.initialRating+'"]',s):t("option:selected",s),s.data("barrating",{currentRatingValue:i.val(),currentRatingText:i.text(),originalRatingValue:i.val(),originalRatingText:i.text()}),a=t("<div />",{class:"br-widget"}).insertAfter(s),s.find("option").each((function(){var e,r,n,i;(e=t(this).val())&&(r=t(this).text(),n=t("<a />",{href:"#","data-rating-value":e,"data-rating-text":r}),i=t("<span />",{text:l.showValues?r:""}),a.append(n.append(i)))})),l.showSelectedRating&&a.append(t("<div />",{text:"",class:"br-current-rating"})),s.data("barrating").deselectable=!s.find("option:first").val(),n=l.reverse?"nextAll":"prevAll",l.reverse&&a.addClass("br-reverse"),l.readonly&&a.addClass("br-readonly"),a.on("ratingchange",(function(a,e,r){e=e||s.data("barrating").currentRatingValue,r=r||s.data("barrating").currentRatingText,s.find('option[value="'+e+'"]').prop("selected",!0),l.showSelectedRating&&t(this).find(".br-current-rating").text(r)})).trigger("ratingchange"),a.on("updaterating",(function(a){t(this).find('a[data-rating-value="'+s.data("barrating").currentRatingValue+'"]').addClass("br-selected br-current")[n]().addClass("br-selected")})).trigger("updaterating"),e=a.find("a"),(r||l.readonly)&&e.on("click",(function(t){t.preventDefault()})),l.readonly||(e.on(o,(function(r){var i,o,g=t(this);return r.preventDefault(),e.removeClass("br-active br-selected"),g.addClass("br-selected")[n]().addClass("br-selected"),i=g.attr("data-rating-value"),o=g.attr("data-rating-text"),g.hasClass("br-current")&&s.data("barrating").deselectable?(g.removeClass("br-selected br-current")[n]().removeClass("br-selected br-current"),i="",o=""):(e.removeClass("br-current"),g.addClass("br-current")),s.data("barrating").currentRatingValue=i,s.data("barrating").currentRatingText=o,a.trigger("ratingchange"),l.onSelect.call(this,s.data("barrating").currentRatingValue,s.data("barrating").currentRatingText),!1})),r||(e.on({mouseenter:function(){var r=t(this);e.removeClass("br-active").removeClass("br-selected"),r.addClass("br-active")[n]().addClass("br-active"),a.trigger("ratingchange",[r.attr("data-rating-value"),r.attr("data-rating-text")])}}),a.on({mouseleave:function(){e.removeClass("br-active"),a.trigger("ratingchange").trigger("updaterating")}}))),s.hide())},this.clear=function(){var a=t(this.elem),e=a.next(".br-widget");e&&a.data("barrating")&&(e.find("a").removeClass("br-selected br-current"),a.data("barrating").currentRatingValue=a.data("barrating").originalRatingValue,a.data("barrating").currentRatingText=a.data("barrating").originalRatingText,e.trigger("ratingchange").trigger("updaterating"),this.options.onClear.call(this,a.data("barrating").currentRatingValue,a.data("barrating").currentRatingText))},this.destroy=function(){var a=t(this.elem),e=a.next(".br-widget");if(e&&a.data("barrating")){var r=a.data("barrating").currentRatingValue,n=a.data("barrating").currentRatingText;a.removeData("barrating"),e.off().remove(),a.show(),this.options.onDestroy.call(this,r,n)}}}return a.prototype.init=function(a,e){return this,this.elem=e,this.options=t.extend({},t.fn.barrating.defaults,a)},a}(),t.fn.barrating=function(e,r){return this.each((function(){var n=new a;return t(this).is("select")||t.error("Sorry, this plugin only works with select fields."),n.hasOwnProperty(e)?(n.init(r,this),n[e]()):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.barrating"):(r=e,n.init(r,this),n.show())}))},t.fn.barrating.defaults={initialRating:null,showValues:!1,showSelectedRating:!0,reverse:!1,readonly:!1,onSelect:function(t,a){},onClear:function(t,a){},onDestroy:function(t,a){}}}(jQuery);